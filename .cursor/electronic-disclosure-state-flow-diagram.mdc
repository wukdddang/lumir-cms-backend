---
alwaysApply: true
---

# ì „ìê³µì‹œ ìƒíƒœ íë¦„ ë‹¤ì´ì–´ê·¸ë¨ (API í¬í•¨)

## ğŸ“‹ ê°œìš”

ì „ìê³µì‹œ(Electronic Disclosure)ëŠ” ì½˜í…ì¸  ê´€ë¦¬ ì‹œìŠ¤í…œì˜ í•µì‹¬ ì—”í‹°í‹°ë¡œ, **ìƒíƒœ(Status)**ì™€ **ê³µê°œ ì—¬ë¶€(isPublic)** ë‘ ê°€ì§€ ì°¨ì›ì—ì„œ ê´€ë¦¬ë©ë‹ˆë‹¤.

## ğŸ”„ ìƒíƒœ(Status) ì •ì˜

| ìƒíƒœ       | ê°’             | ì„¤ëª…                              |
| ---------- | -------------- | --------------------------------- |
| **ì´ˆì•ˆ**   | `draft`        | ì‘ì„± ì¤‘ì¸ ìƒíƒœ, ì•„ì§ ê²€í†  ìš”ì²­ ì „ |
| **ê²€í† ì¤‘** | `under_review` | ê²€í†  ìš”ì²­ í›„ ìŠ¹ì¸ ëŒ€ê¸° ì¤‘         |
| **ìŠ¹ì¸ë¨** | `approved`     | ê²€í†  ì™„ë£Œ, ìŠ¹ì¸ëœ ìƒíƒœ            |
| **ê±°ë¶€ë¨** | `rejected`     | ê²€í†  ê²°ê³¼ ê±°ë¶€ëœ ìƒíƒœ             |
| **ê³µê°œë¨** | `opened`       | ìµœì¢… ê³µê°œëœ ìƒíƒœ                  |

## ğŸ“Š ìƒíƒœ ì „ì´ ë‹¤ì´ì–´ê·¸ë¨ (API í¬í•¨)

```mermaid
stateDiagram-v2
    [*] --> draft: POST /api/admin/electronic-disclosures<br/>(ì „ìê³µì‹œ ìƒì„±)

    draft --> under_review: PATCH /api/admin/electronic-disclosures/:id/status<br/>(ê²€í†  ìš”ì²­)
    draft --> draft: PUT /api/admin/electronic-disclosures/:id<br/>PATCH /api/admin/electronic-disclosures/:id/files<br/>PATCH /api/admin/electronic-disclosures/:id/public<br/>(ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥)

    under_review --> approved: PATCH /api/admin/electronic-disclosures/:id/status<br/>(ìŠ¹ì¸)
    under_review --> rejected: PATCH /api/admin/electronic-disclosures/:id/status<br/>(ê±°ë¶€)
    under_review --> draft: PATCH /api/admin/electronic-disclosures/:id/status<br/>(ê²€í†  ì·¨ì†Œ)

    approved --> opened: PATCH /api/admin/electronic-disclosures/:id/status<br/>(ê³µê°œ ì„¤ì •)
    approved --> draft: PUT /api/admin/electronic-disclosures/:id<br/>(ìˆ˜ì • ì‹œì‘)

    rejected --> draft: PATCH /api/admin/electronic-disclosures/:id/status<br/>(ìˆ˜ì • ì‹œì‘)

    opened --> draft: PUT /api/admin/electronic-disclosures/:id<br/>(ìˆ˜ì • ì‹œì‘)
    opened --> opened: PATCH /api/admin/electronic-disclosures/:id/public<br/>(ë¹„ê³µê°œ ì„¤ì •, isPublic=false)

    note right of draft
        ìƒíƒœ: ì´ˆì•ˆ
        - ëª¨ë“  ë‚´ìš© ìˆ˜ì • ê°€ëŠ¥
        - íŒŒì¼ ì²¨ë¶€/ìˆ˜ì •/ì‚­ì œ
        - ê³µê°œ ì—¬ë¶€ ë³€ê²½
        - ì‚­ì œ ê°€ëŠ¥
        
        API:
        - PUT /api/admin/electronic-disclosures/:id
        - PATCH /api/admin/electronic-disclosures/:id/files
        - DELETE /api/admin/electronic-disclosures/:id/files
        - PATCH /api/admin/electronic-disclosures/:id/order
        - PATCH /api/admin/electronic-disclosures/:id/public
        - DELETE /api/admin/electronic-disclosures/:id
    end note

    note right of under_review
        ìƒíƒœ: ê²€í† ì¤‘
        - ë‚´ìš© ìˆ˜ì • ë¶ˆê°€
        - ì‚­ì œ ë¶ˆê°€
        - ìŠ¹ì¸/ê±°ë¶€ ëŒ€ê¸°
        
        API:
        - GET /api/admin/electronic-disclosures/:id
        - PATCH /api/admin/electronic-disclosures/:id/status
    end note

    note right of approved
        ìƒíƒœ: ìŠ¹ì¸ë¨
        - ê³µê°œ ì¤€ë¹„ ì™„ë£Œ
        - ê³µê°œ ì„¤ì • ê°€ëŠ¥
        - ìˆ˜ì • ì‹œ DRAFTë¡œ ì „ì´
        
        API:
        - GET /api/admin/electronic-disclosures/:id
        - PATCH /api/admin/electronic-disclosures/:id/status
        - PATCH /api/admin/electronic-disclosures/:id/public
        - DELETE /api/admin/electronic-disclosures/:id
    end note

    note right of rejected
        ìƒíƒœ: ê±°ë¶€ë¨
        - ìˆ˜ì • í•„ìš”
        - ì¬ê²€í†  ê°€ëŠ¥
        - ê³µê°œ ë¶ˆê°€
        
        API:
        - GET /api/admin/electronic-disclosures/:id
        - PATCH /api/admin/electronic-disclosures/:id/status
        - DELETE /api/admin/electronic-disclosures/:id
    end note

    note right of opened
        ìƒíƒœ: ê³µê°œë¨
        - ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œ
        (isPublic=trueì¼ ë•Œë§Œ)
        - ìˆ˜ì • ì‹œ DRAFTë¡œ ì „ì´
        - ë¹„ê³µê°œ ì²˜ë¦¬ ê°€ëŠ¥
        
        API:
        - GET /api/admin/electronic-disclosures/:id
        - PATCH /api/admin/electronic-disclosures/:id/public
        - PUT /api/admin/electronic-disclosures/:id
        - DELETE /api/admin/electronic-disclosures/:id
    end note
```

## ğŸŒ ì „ì²´ API ì—”ë“œí¬ì¸íŠ¸ ë§µ

### ìƒíƒœì™€ ë¬´ê´€í•œ ì¡°íšŒ API

```mermaid
graph LR
    A[ì „ìê³µì‹œ API] --> B[GET /api/admin/electronic-disclosures]
    A --> C[GET /api/admin/electronic-disclosures/all]
    A --> D[GET /api/admin/electronic-disclosures/:id]
    A --> E[GET /api/admin/electronic-disclosures/categories]
    
    B --> B1[ëª©ë¡ ì¡°íšŒ<br/>í˜ì´ì§•]
    C --> C1[ì „ì²´ ëª©ë¡ ì¡°íšŒ<br/>í˜ì´ì§• ì—†ìŒ]
    D --> D1[ìƒì„¸ ì¡°íšŒ]
    E --> E1[ì¹´í…Œê³ ë¦¬ ëª©ë¡<br/>ì¡°íšŒ]
```

### ìƒíƒœë³„ ê°€ëŠ¥í•œ API ì•¡ì…˜

```mermaid
graph TD
    subgraph DRAFT["DRAFT (ì´ˆì•ˆ)"]
        D1[POST /api/admin/electronic-disclosures<br/>ìƒì„±]
        D2[PUT /api/admin/electronic-disclosures/:id<br/>ì „ìê³µì‹œ ìˆ˜ì •]
        D3[PATCH /api/admin/electronic-disclosures/:id/files<br/>íŒŒì¼ ìˆ˜ì •]
        D4[DELETE /api/admin/electronic-disclosures/:id/files<br/>íŒŒì¼ ì‚­ì œ]
        D5[PATCH /api/admin/electronic-disclosures/:id/order<br/>ì •ë ¬ ìˆœì„œ ìˆ˜ì •]
        D6[PATCH /api/admin/electronic-disclosures/:id/public<br/>ê³µê°œ ì—¬ë¶€ ìˆ˜ì •]
        D7[DELETE /api/admin/electronic-disclosures/:id<br/>ì‚­ì œ]
        D8[PATCH /api/admin/electronic-disclosures/:id/status<br/>â†’ UNDER_REVIEW ì „ì´]
    end
    
    subgraph UNDER_REVIEW["UNDER_REVIEW (ê²€í† ì¤‘)"]
        U1[GET /api/admin/electronic-disclosures/:id<br/>ì¡°íšŒë§Œ ê°€ëŠ¥]
        U2[PATCH /api/admin/electronic-disclosures/:id/status<br/>â†’ APPROVED ìŠ¹ì¸]
        U3[PATCH /api/admin/electronic-disclosures/:id/status<br/>â†’ REJECTED ê±°ë¶€]
        U4[PATCH /api/admin/electronic-disclosures/:id/status<br/>â†’ DRAFT ì·¨ì†Œ]
    end
    
    subgraph APPROVED["APPROVED (ìŠ¹ì¸ë¨)"]
        A1[GET /api/admin/electronic-disclosures/:id<br/>ì¡°íšŒ]
        A2[PATCH /api/admin/electronic-disclosures/:id/status<br/>â†’ OPENED ê³µê°œ]
        A3[PATCH /api/admin/electronic-disclosures/:id/public<br/>ê³µê°œ ì—¬ë¶€ ìˆ˜ì •]
        A4[PUT /api/admin/electronic-disclosures/:id<br/>â†’ DRAFTë¡œ ì „ì´ í›„ ìˆ˜ì •]
        A5[DELETE /api/admin/electronic-disclosures/:id<br/>ì‚­ì œ]
    end
    
    subgraph REJECTED["REJECTED (ê±°ë¶€ë¨)"]
        R1[GET /api/admin/electronic-disclosures/:id<br/>ì¡°íšŒ]
        R2[PATCH /api/admin/electronic-disclosures/:id/status<br/>â†’ DRAFTë¡œ ì „ì´]
        R3[DELETE /api/admin/electronic-disclosures/:id<br/>ì‚­ì œ]
    end
    
    subgraph OPENED["OPENED (ê³µê°œë¨)"]
        O1[GET /api/admin/electronic-disclosures/:id<br/>ì¡°íšŒ]
        O2[PATCH /api/admin/electronic-disclosures/:id/public<br/>ë¹„ê³µê°œ ì„¤ì •]
        O3[PUT /api/admin/electronic-disclosures/:id<br/>â†’ DRAFTë¡œ ì „ì´ í›„ ìˆ˜ì •]
        O4[DELETE /api/admin/electronic-disclosures/:id<br/>ì‚­ì œ]
    end

    style DRAFT fill:#e3f2fd
    style UNDER_REVIEW fill:#fff3e0
    style APPROVED fill:#e8f5e9
    style REJECTED fill:#ffebee
    style OPENED fill:#f3e5f5
```

## ğŸ”„ ìƒíƒœ ì „ì´ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì •ìƒì ì¸ ê³µê°œ í”„ë¡œì„¸ìŠ¤

```mermaid
sequenceDiagram
    participant Admin as ê´€ë¦¬ì
    participant API as API ì„œë²„
    participant DB as ë°ì´í„°ë² ì´ìŠ¤
    
    Note over Admin,DB: 1. ì „ìê³µì‹œ ìƒì„±
    Admin->>API: POST /api/admin/electronic-disclosures
    API->>DB: INSERT (status: 'draft', isPublic: false)
    DB-->>API: ìƒì„± ì™„ë£Œ
    API-->>Admin: 201 Created (DRAFT)
    
    Note over Admin,DB: 2. íŒŒì¼ ë° ë‚´ìš© ìˆ˜ì •
    Admin->>API: PATCH /api/admin/electronic-disclosures/:id/files
    API->>DB: UPDATE files
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK
    
    Admin->>API: PUT /api/admin/electronic-disclosures/:id
    API->>DB: UPDATE translations
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK
    
    Note over Admin,DB: 3. ê²€í†  ìš”ì²­
    Admin->>API: PATCH /api/admin/electronic-disclosures/:id/status<br/>{status: 'under_review'}
    API->>DB: UPDATE status = 'under_review'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (UNDER_REVIEW)
    
    Note over Admin,DB: 4. ìŠ¹ì¸
    Admin->>API: PATCH /api/admin/electronic-disclosures/:id/status<br/>{status: 'approved'}
    API->>DB: UPDATE status = 'approved'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (APPROVED)
    
    Note over Admin,DB: 5. ê³µê°œ ì„¤ì •
    Admin->>API: PATCH /api/admin/electronic-disclosures/:id/status<br/>{status: 'opened'}
    API->>DB: UPDATE status = 'opened'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (OPENED)
    
    Note over Admin,DB: 6. ê³µê°œ ì—¬ë¶€ í™œì„±í™”
    Admin->>API: PATCH /api/admin/electronic-disclosures/:id/public<br/>{isPublic: true}
    API->>DB: UPDATE isPublic = true
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK
    
    Note over Admin,DB: âœ… ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë¨
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ê±°ë¶€ í›„ ì¬ê²€í† 

```mermaid
sequenceDiagram
    participant Admin as ê´€ë¦¬ì
    participant API as API ì„œë²„
    participant DB as ë°ì´í„°ë² ì´ìŠ¤
    
    Note over Admin,DB: 1-3. ìƒì„± â†’ ê²€í†  ìš”ì²­ (ìƒëµ)
    
    Note over Admin,DB: 4. ê±°ë¶€
    Admin->>API: PATCH /api/admin/electronic-disclosures/:id/status<br/>{status: 'rejected'}
    API->>DB: UPDATE status = 'rejected'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (REJECTED)
    
    Note over Admin,DB: 5. ìˆ˜ì • ì‹œì‘
    Admin->>API: PATCH /api/admin/electronic-disclosures/:id/status<br/>{status: 'draft'}
    API->>DB: UPDATE status = 'draft'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (DRAFT)
    
    Note over Admin,DB: 6. ë‚´ìš© ìˆ˜ì •
    Admin->>API: PUT /api/admin/electronic-disclosures/:id
    API->>DB: UPDATE translations
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK
    
    Note over Admin,DB: 7. ì¬ê²€í†  ìš”ì²­
    Admin->>API: PATCH /api/admin/electronic-disclosures/:id/status<br/>{status: 'under_review'}
    API->>DB: UPDATE status = 'under_review'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (UNDER_REVIEW)
    
    Note over Admin,DB: 8-10. ìŠ¹ì¸ â†’ ê³µê°œ (ìƒëµ)
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ê³µê°œëœ ì½˜í…ì¸  ìˆ˜ì •

```mermaid
sequenceDiagram
    participant Admin as ê´€ë¦¬ì
    participant API as API ì„œë²„
    participant DB as ë°ì´í„°ë² ì´ìŠ¤
    participant User as ì‚¬ìš©ì
    
    Note over Admin,User: âœ… í˜„ì¬ ê³µê°œ ì¤‘ (OPENED, isPublic: true)
    User->>API: GET /api/public/electronic-disclosures
    API->>DB: SELECT WHERE status='opened' AND isPublic=true
    DB-->>API: ì „ìê³µì‹œ ëª©ë¡
    API-->>User: 200 OK (ë…¸ì¶œë¨)
    
    Note over Admin,User: ìˆ˜ì • í•„ìš” ë°œìƒ
    Admin->>API: PUT /api/admin/electronic-disclosures/:id
    API->>DB: UPDATE status = 'draft' (ìë™ ì „ì´)<br/>UPDATE translations
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK (DRAFT)
    
    Note over Admin,User: âŒ ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œ ì¤‘ë‹¨
    User->>API: GET /api/public/electronic-disclosures
    API->>DB: SELECT WHERE status='opened' AND isPublic=true
    DB-->>API: í•´ë‹¹ ì „ìê³µì‹œ ì œì™¸
    API-->>User: 200 OK (ë…¸ì¶œ ì•ˆ ë¨)
    
    Note over Admin,User: ìˆ˜ì • â†’ ê²€í†  â†’ ìŠ¹ì¸ â†’ ì¬ê³µê°œ
    Admin->>API: PATCH /api/admin/electronic-disclosures/:id/status<br/>(under_review â†’ approved â†’ opened)
    API->>DB: UPDATE status
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (OPENED)
    
    Note over Admin,User: âœ… ì‚¬ìš©ìì—ê²Œ ë‹¤ì‹œ ë…¸ì¶œë¨
```

## ğŸ¯ API ì—”ë“œí¬ì¸íŠ¸ ìƒì„¸ ëª…ì„¸

### 1. ì „ìê³µì‹œ ìƒì„±

```
POST /api/admin/electronic-disclosures
Content-Type: multipart/form-data

Body:
- translations: JSON string (ë°°ì—´)
  ì˜ˆ: '[{"languageId":"uuid","title":"ì œëª©","description":"ì„¤ëª…"}]'
- files: íŒŒì¼ ë°°ì—´ (ìµœëŒ€ 10ê°œ, PDF/JPG/PNG/WEBP/XLSX/DOCX)

Response: 201 Created
- status: 'draft' (ê¸°ë³¸ê°’)
- isPublic: false (ê¸°ë³¸ê°’)
```

### 2. ì „ìê³µì‹œ ìˆ˜ì •

```
PUT /api/admin/electronic-disclosures/:id

Body:
{
  "translations": [
    {
      "languageId": "uuid",
      "title": "ì œëª©",
      "description": "ì„¤ëª…"
    }
  ],
  "isPublic": true | false,
  "categoryId": "uuid" (optional)
}

Response: 200 OK
- statusê°€ 'opened'ì˜€ë‹¤ë©´ ìë™ìœ¼ë¡œ 'draft'ë¡œ ì „ì´
```

### 3. ìƒíƒœ ë³€ê²½ (êµ¬í˜„ í•„ìš”)

```
PATCH /api/admin/electronic-disclosures/:id/status

Body:
{
  "status": "under_review" | "approved" | "rejected" | "opened" | "draft"
}

Response: 200 OK
- ë³€ê²½ëœ ì „ìê³µì‹œ ì •ë³´
```

### 4. ê³µê°œ ì—¬ë¶€ ë³€ê²½

```
PATCH /api/admin/electronic-disclosures/:id/public

Body:
{
  "isPublic": true | false
}

Response: 200 OK
- ë³€ê²½ëœ ì „ìê³µì‹œ ì •ë³´
```

### 5. íŒŒì¼ ìˆ˜ì •

```
PATCH /api/admin/electronic-disclosures/:id/files
Content-Type: multipart/form-data

Body:
- files: íŒŒì¼ ë°°ì—´ (ìµœëŒ€ 10ê°œ)

Response: 200 OK
```

### 6. íŒŒì¼ ì‚­ì œ

```
DELETE /api/admin/electronic-disclosures/:id/files

Body:
{
  "fileUrls": ["url1", "url2"]
}

Response: 200 OK
```

### 7. ì „ìê³µì‹œ ì‚­ì œ (Soft Delete)

```
DELETE /api/admin/electronic-disclosures/:id

Response: 200 OK
{
  "success": true
}
```

### 8. ì •ë ¬ ìˆœì„œ ìˆ˜ì •

```
PATCH /api/admin/electronic-disclosures/:id/order

Body:
{
  "order": 10
}

Response: 200 OK
```

### 9. ì „ìê³µì‹œ ëª©ë¡ ì¡°íšŒ

```
GET /api/admin/electronic-disclosures?isPublic=true&orderBy=order&page=1&limit=10

Query Parameters:
- isPublic: boolean (optional) - ê³µê°œ ì—¬ë¶€ í•„í„°
- orderBy: 'order' | 'createdAt' (optional, default: 'order')
- page: number (optional, default: 1)
- limit: number (optional, default: 10)

Response: 200 OK
{
  "items": [...],
  "total": 100,
  "page": 1,
  "limit": 10
}
```

### 10. ì „ìê³µì‹œ ì „ì²´ ëª©ë¡ ì¡°íšŒ

```
GET /api/admin/electronic-disclosures/all

Response: 200 OK
[...ì „ìê³µì‹œ ëª©ë¡...]
```

### 11. ì „ìê³µì‹œ ìƒì„¸ ì¡°íšŒ

```
GET /api/admin/electronic-disclosures/:id

Response: 200 OK
{
  "id": "uuid",
  "status": "opened",
  "isPublic": true,
  "translations": [...],
  "files": [...],
  ...
}
```

## ğŸ”“ ê³µê°œ ì¡°ê±´ í”Œë¡œìš°

```mermaid
flowchart TD
    Start([ì „ìê³µì‹œ API ìš”ì²­])
    Start --> CheckAPI{API íƒ€ì…?}
    
    CheckAPI -->|ê´€ë¦¬ì API| AdminAPI[ì „ì²´ ì¡°íšŒ ê°€ëŠ¥]
    CheckAPI -->|ê³µê°œ API| PublicAPI[í•„í„°ë§ í•„ìš”]
    
    PublicAPI --> CheckDeleted{deletedAtì´<br/>nullì¸ê°€?}
    
    CheckDeleted -->|No| NotVisible1[âŒ ë…¸ì¶œ ì•ˆ ë¨]
    CheckDeleted -->|Yes| CheckStatus{statusê°€<br/>'opened'ì¸ê°€?}
    
    CheckStatus -->|No| NotVisible2[âŒ ë…¸ì¶œ ì•ˆ ë¨]
    CheckStatus -->|Yes| CheckPublic{isPublicì´<br/>trueì¸ê°€?}
    
    CheckPublic -->|No| NotVisible3[âŒ ë…¸ì¶œ ì•ˆ ë¨]
    CheckPublic -->|Yes| Visible[âœ… ì‚¬ìš©ìì—ê²Œ<br/>ë…¸ì¶œë¨]
    
    style NotVisible1 fill:#ffcccc
    style NotVisible2 fill:#ffcccc
    style NotVisible3 fill:#ffcccc
    style Visible fill:#ccffcc
    style AdminAPI fill:#e3f2fd
```

## ğŸ“‹ ìƒíƒœ ì „ì´ ê·œì¹™ ìš”ì•½

### í—ˆìš©ë˜ëŠ” ì „ì´

| í˜„ì¬ ìƒíƒœ      | ë‹¤ìŒ ìƒíƒœ      | API ì—”ë“œí¬ì¸íŠ¸                                          | ì¡°ê±´         |
| -------------- | -------------- | ------------------------------------------------------- | ------------ |
| `draft`        | `under_review` | `PATCH /api/admin/electronic-disclosures/:id/status`    | ê²€í†  ìš”ì²­    |
| `under_review` | `approved`     | `PATCH /api/admin/electronic-disclosures/:id/status`    | ìŠ¹ì¸         |
| `under_review` | `rejected`     | `PATCH /api/admin/electronic-disclosures/:id/status`    | ê±°ë¶€         |
| `under_review` | `draft`        | `PATCH /api/admin/electronic-disclosures/:id/status`    | ê²€í†  ì·¨ì†Œ    |
| `approved`     | `opened`       | `PATCH /api/admin/electronic-disclosures/:id/status`    | ê³µê°œ ì„¤ì •    |
| `approved`     | `draft`        | `PUT /api/admin/electronic-disclosures/:id`             | ìˆ˜ì • ì‹œì‘    |
| `rejected`     | `draft`        | `PATCH /api/admin/electronic-disclosures/:id/status`    | ìˆ˜ì • ì‹œì‘    |
| `opened`       | `draft`        | `PUT /api/admin/electronic-disclosures/:id`             | ìˆ˜ì • ì‹œì‘    |
| `opened`       | `opened`       | `PATCH /api/admin/electronic-disclosures/:id/public`    | ë¹„ê³µê°œ ì„¤ì •  |

### ê¸ˆì§€ë˜ëŠ” ì „ì´

- âŒ `draft` â†’ `approved` (ê²€í†  ì—†ì´ ìŠ¹ì¸ ë¶ˆê°€)
- âŒ `draft` â†’ `opened` (ê²€í†  ë° ìŠ¹ì¸ ì—†ì´ ê³µê°œ ë¶ˆê°€)
- âŒ `rejected` â†’ `approved` (ê±°ë¶€ í›„ ë°”ë¡œ ìŠ¹ì¸ ë¶ˆê°€)
- âŒ `rejected` â†’ `opened` (ê±°ë¶€ëœ ì½˜í…ì¸  ê³µê°œ ë¶ˆê°€)
- âŒ `under_review` â†’ `opened` (ê²€í†  ì¤‘ ê³µê°œ ë¶ˆê°€)

## ğŸ¨ ìƒíƒœë³„ ìƒì„¸ ì„¤ëª…

### 1. ì´ˆì•ˆ (DRAFT)

**ì„¤ëª…**: ì „ìê³µì‹œê°€ ìƒì„±ë˜ê±°ë‚˜ ìˆ˜ì • ì¤‘ì¸ ìƒíƒœ

**ê°€ëŠ¥í•œ ì•¡ì…˜**:

- âœ… ì „ìê³µì‹œ ì •ë³´ ìˆ˜ì • (ì œëª©, ì„¤ëª…, ë²ˆì—­ ë“±)
- âœ… íŒŒì¼ ì²¨ë¶€/ìˆ˜ì •/ì‚­ì œ
- âœ… ì •ë ¬ ìˆœì„œ ë³€ê²½
- âœ… ê³µê°œ ì—¬ë¶€ ë³€ê²½ (isPublic)
- âœ… ì‚­ì œ (Soft Delete)
- âœ… **ê²€í†  ìš”ì²­** â†’ `UNDER_REVIEW`ë¡œ ì „ì´

**ì œí•œ ì‚¬í•­**:

- âŒ ê³µê°œ ìƒíƒœì—¬ë„ ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë˜ì§€ ì•ŠìŒ (statusê°€ `opened`ê°€ ì•„ë‹ˆë©´)

**API ì—”ë“œí¬ì¸íŠ¸**:

- `POST /api/admin/electronic-disclosures` - ì „ìê³µì‹œ ìƒì„± (ê¸°ë³¸ê°’: `status: 'draft'`)
- `PUT /api/admin/electronic-disclosures/:id` - ì „ìê³µì‹œ ìˆ˜ì •
- `PATCH /api/admin/electronic-disclosures/:id/files` - íŒŒì¼ ìˆ˜ì •
- `DELETE /api/admin/electronic-disclosures/:id/files` - íŒŒì¼ ì‚­ì œ
- `PATCH /api/admin/electronic-disclosures/:id/order` - ì •ë ¬ ìˆœì„œ ìˆ˜ì •
- `PATCH /api/admin/electronic-disclosures/:id/public` - ê³µê°œ ì—¬ë¶€ ìˆ˜ì •
- `DELETE /api/admin/electronic-disclosures/:id` - ì‚­ì œ

### 2. ê²€í† ì¤‘ (UNDER_REVIEW)

**ì„¤ëª…**: ê²€í†  ìš”ì²­ì´ ì œì¶œë˜ì–´ ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ìƒíƒœ

**ê°€ëŠ¥í•œ ì•¡ì…˜**:

- âœ… ì „ìê³µì‹œ ìƒì„¸ ì¡°íšŒ
- âœ… **ìŠ¹ì¸** â†’ `APPROVED`ë¡œ ì „ì´
- âœ… **ê±°ë¶€** â†’ `REJECTED`ë¡œ ì „ì´
- âœ… **ê²€í†  ì·¨ì†Œ** â†’ `DRAFT`ë¡œ ì „ì´ (ì„ íƒì‚¬í•­)

**ì œí•œ ì‚¬í•­**:

- âŒ ë‚´ìš© ìˆ˜ì • ë¶ˆê°€ (ê²€í†  ì¤‘ì—ëŠ” ë³€ê²½ ë¶ˆê°€)
- âŒ ì‚­ì œ ë¶ˆê°€ (ê²€í†  í”„ë¡œì„¸ìŠ¤ ì§„í–‰ ì¤‘)
- âŒ ê³µê°œ ì—¬ë¶€ ë³€ê²½ ë¶ˆê°€

**API ì—”ë“œí¬ì¸íŠ¸**:

- `GET /api/admin/electronic-disclosures/:id` - ìƒì„¸ ì¡°íšŒ
- `PATCH /api/admin/electronic-disclosures/:id/status` - ìƒíƒœ ë³€ê²½ (ìŠ¹ì¸/ê±°ë¶€) _(êµ¬í˜„ í•„ìš”)_

### 3. ìŠ¹ì¸ë¨ (APPROVED)

**ì„¤ëª…**: ê²€í† ë¥¼ í†µê³¼í•˜ì—¬ ìŠ¹ì¸ëœ ìƒíƒœ

**ê°€ëŠ¥í•œ ì•¡ì…˜**:

- âœ… ì „ìê³µì‹œ ìƒì„¸ ì¡°íšŒ
- âœ… **ê³µê°œ ì„¤ì •** â†’ `OPENED`ë¡œ ì „ì´
- âœ… **ì¬ê²€í†  ìš”ì²­** â†’ `UNDER_REVIEW`ë¡œ ì „ì´ (ìˆ˜ì • í›„)
- âœ… ë‚´ìš© ìˆ˜ì • (ìˆ˜ì • ì‹œ ìë™ìœ¼ë¡œ `DRAFT`ë¡œ ì „ì´)
- âœ… ì‚­ì œ

**ì œí•œ ì‚¬í•­**:

- âš ï¸ ê³µê°œ ì—¬ë¶€ê°€ `true`ì—¬ë„ `status`ê°€ `opened`ê°€ ì•„ë‹ˆë©´ ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë˜ì§€ ì•ŠìŒ

**API ì—”ë“œí¬ì¸íŠ¸**:

- `GET /api/admin/electronic-disclosures/:id` - ìƒì„¸ ì¡°íšŒ
- `PATCH /api/admin/electronic-disclosures/:id/public` - ê³µê°œ ì—¬ë¶€ ë³€ê²½
- `PATCH /api/admin/electronic-disclosures/:id/status` - ìƒíƒœ ë³€ê²½ (openedë¡œ) _(êµ¬í˜„ í•„ìš”)_
- `DELETE /api/admin/electronic-disclosures/:id` - ì‚­ì œ

### 4. ê±°ë¶€ë¨ (REJECTED)

**ì„¤ëª…**: ê²€í†  ê²°ê³¼ ê±°ë¶€ëœ ìƒíƒœ

**ê°€ëŠ¥í•œ ì•¡ì…˜**:

- âœ… ì „ìê³µì‹œ ìƒì„¸ ì¡°íšŒ
- âœ… **ìˆ˜ì • í›„ ì¬ê²€í† ** â†’ `DRAFT`ë¡œ ì „ì´ í›„ ìˆ˜ì • â†’ `UNDER_REVIEW`ë¡œ ì „ì´
- âœ… ì‚­ì œ

**ì œí•œ ì‚¬í•­**:

- âŒ ê³µê°œ ë¶ˆê°€ (ê±°ë¶€ëœ ì½˜í…ì¸ ëŠ” ê³µê°œí•  ìˆ˜ ì—†ìŒ)
- âŒ ìŠ¹ì¸ ë¶ˆê°€ (ê±°ë¶€ëœ ìƒíƒœì—ì„œ ë°”ë¡œ ìŠ¹ì¸ ë¶ˆê°€)

**API ì—”ë“œí¬ì¸íŠ¸**:

- `GET /api/admin/electronic-disclosures/:id` - ìƒì„¸ ì¡°íšŒ
- `PATCH /api/admin/electronic-disclosures/:id/status` - ìƒíƒœ ë³€ê²½ (draftë¡œ) _(êµ¬í˜„ í•„ìš”)_
- `DELETE /api/admin/electronic-disclosures/:id` - ì‚­ì œ

### 5. ê³µê°œë¨ (OPENED)

**ì„¤ëª…**: ìµœì¢… ìŠ¹ì¸ë˜ì–´ ê³µê°œëœ ìƒíƒœ

**ê°€ëŠ¥í•œ ì•¡ì…˜**:

- âœ… ì „ìê³µì‹œ ìƒì„¸ ì¡°íšŒ
- âœ… **ë¹„ê³µê°œ ì²˜ë¦¬** â†’ `isPublic: false`ë¡œ ë³€ê²½ (ìƒíƒœëŠ” ìœ ì§€)
- âœ… **ë‚´ìš© ìˆ˜ì •** â†’ `DRAFT`ë¡œ ì „ì´ (ê³µê°œëœ ì½˜í…ì¸  ìˆ˜ì • ì‹œ)
- âœ… ì‚­ì œ (Soft Delete)

**ì œí•œ ì‚¬í•­**:

- âš ï¸ ê³µê°œëœ ì½˜í…ì¸  ìˆ˜ì • ì‹œ ìë™ìœ¼ë¡œ `DRAFT`ë¡œ ì „ì´ë˜ì–´ ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œ ì¤‘ë‹¨
- âš ï¸ ì‚­ì œ ì‹œ Soft Deleteë¡œ ì²˜ë¦¬ (ë°ì´í„°ëŠ” ë³´ì¡´)

**API ì—”ë“œí¬ì¸íŠ¸**:

- `GET /api/admin/electronic-disclosures/:id` - ìƒì„¸ ì¡°íšŒ
- `PATCH /api/admin/electronic-disclosures/:id/public` - ê³µê°œ ì—¬ë¶€ ë³€ê²½
- `PUT /api/admin/electronic-disclosures/:id` - ìˆ˜ì • (ìë™ìœ¼ë¡œ DRAFTë¡œ ì „ì´)
- `DELETE /api/admin/electronic-disclosures/:id` - ì‚­ì œ

## ğŸ”§ êµ¬í˜„ í•„ìš” ì‚¬í•­

### í˜„ì¬ êµ¬í˜„ëœ ê¸°ëŠ¥

- âœ… ì „ìê³µì‹œ ìƒì„± (ê¸°ë³¸ê°’: `status: 'draft'`)
- âœ… ì „ìê³µì‹œ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•)
- âœ… ì „ìê³µì‹œ ì „ì²´ ëª©ë¡ ì¡°íšŒ
- âœ… ì „ìê³µì‹œ ìƒì„¸ ì¡°íšŒ
- âœ… ì „ìê³µì‹œ ìˆ˜ì • (`PUT /api/admin/electronic-disclosures/:id`)
- âœ… ê³µê°œ ì—¬ë¶€ ìˆ˜ì • (`isPublic`)
- âœ… íŒŒì¼ ìˆ˜ì •/ì‚­ì œ
- âœ… ì •ë ¬ ìˆœì„œ ìˆ˜ì •
- âœ… ì‚­ì œ (Soft Delete)
- âœ… ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ (ìƒì„±, ìˆ˜ì •, ì‚­ì œ, ìˆœì„œ ë³€ê²½)

### êµ¬í˜„ í•„ìš” ê¸°ëŠ¥

- âš ï¸ **ìƒíƒœ ë³€ê²½ API** (`PATCH /api/admin/electronic-disclosures/:id/status`)
  - `draft` â†’ `under_review` (ê²€í†  ìš”ì²­)
  - `under_review` â†’ `approved` (ìŠ¹ì¸)
  - `under_review` â†’ `rejected` (ê±°ë¶€)
  - `approved` â†’ `opened` (ê³µê°œ)
  - `rejected` â†’ `draft` (ìˆ˜ì • ì‹œì‘)
  - `opened` â†’ `draft` (ìˆ˜ì • ì‹œì‘)

- âš ï¸ **ìƒíƒœ ì „ì´ ê²€ì¦ ë¡œì§**
  - í—ˆìš©ë˜ì§€ ì•ŠëŠ” ìƒíƒœ ì „ì´ ë°©ì§€
  - ìƒíƒœë³„ ì•¡ì…˜ ì œí•œ ê²€ì¦

- âš ï¸ **ìë™ ìƒíƒœ ì „ì´**
  - `opened` ìƒíƒœì—ì„œ ë‚´ìš© ìˆ˜ì • ì‹œ ìë™ìœ¼ë¡œ `draft`ë¡œ ì „ì´
  - íŠ¸ëœì­ì…˜ ì²˜ë¦¬ í•„ìš”

- âš ï¸ **ì‚¬ìš©ì ë…¸ì¶œ í•„í„°ë§**
  - ëª©ë¡ ì¡°íšŒ ì‹œ `status === 'opened' AND isPublic === true` ì¡°ê±´ í•„í„°ë§
  - ê³µê°œ APIì™€ ê´€ë¦¬ì API ë¶„ë¦¬ (ì„ íƒì‚¬í•­)

## ğŸ“Œ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™

### ê·œì¹™ 1: ê³µê°œ ì¡°ê±´

ì „ìê³µì‹œê°€ ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë˜ë ¤ë©´:

- `status`ê°€ `opened`ì—¬ì•¼ í•¨
- `isPublic`ì´ `true`ì—¬ì•¼ í•¨
- `deletedAt`ì´ `null`ì´ì–´ì•¼ í•¨ (Soft Deleteë˜ì§€ ì•Šì•„ì•¼ í•¨)

### ê·œì¹™ 2: ìƒíƒœ ì „ì´ ì œí•œ

- ê²€í†  ì—†ì´ `draft`ì—ì„œ `approved` ë˜ëŠ” `opened`ë¡œ ì „ì´ ë¶ˆê°€
- `rejected` ìƒíƒœì—ì„œ ë°”ë¡œ `approved` ë˜ëŠ” `opened`ë¡œ ì „ì´ ë¶ˆê°€
- `under_review` ìƒíƒœì—ì„œëŠ” ë‚´ìš© ìˆ˜ì • ë¶ˆê°€

### ê·œì¹™ 3: ê³µê°œëœ ì½˜í…ì¸  ìˆ˜ì •

- `opened` ìƒíƒœì˜ ì „ìê³µì‹œë¥¼ ìˆ˜ì •í•˜ë©´ ìë™ìœ¼ë¡œ `draft`ë¡œ ì „ì´
- ìˆ˜ì • ì¤‘ì—ëŠ” ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë˜ì§€ ì•ŠìŒ
- ìˆ˜ì • ì™„ë£Œ í›„ ì¬ê²€í†  â†’ ìŠ¹ì¸ â†’ ê³µê°œ í”„ë¡œì„¸ìŠ¤ í•„ìš”

### ê·œì¹™ 4: ì‚­ì œ ì •ì±…

- ëª¨ë“  ìƒíƒœì—ì„œ ì‚­ì œ ê°€ëŠ¥ (Soft Delete)
- ì‚­ì œëœ ì „ìê³µì‹œëŠ” ê´€ë¦¬ì APIì—ì„œë„ ê¸°ë³¸ì ìœ¼ë¡œ ì¡°íšŒë˜ì§€ ì•ŠìŒ
- `deletedAt`ì´ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œ ë¶ˆê°€

## ğŸ¯ ê¶Œì¥ ì›Œí¬í”Œë¡œìš°

### ê´€ë¦¬ì ì›Œí¬í”Œë¡œìš°

```
1. ì „ìê³µì‹œ ìƒì„± (DRAFT)
   â†“
2. ë‚´ìš© ì‘ì„± ë° íŒŒì¼ ì²¨ë¶€
   â†“
3. ê²€í†  ìš”ì²­ (UNDER_REVIEW)
   â†“
4. ê²€í† ì ìŠ¹ì¸/ê±°ë¶€
   â”œâ”€ ìŠ¹ì¸ â†’ APPROVED
   â””â”€ ê±°ë¶€ â†’ REJECTED â†’ ìˆ˜ì • â†’ ì¬ê²€í† 
   â†“
5. ê³µê°œ ì„¤ì • (OPENED)
   â†“
6. ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œ
```

### ìˆ˜ì • ì›Œí¬í”Œë¡œìš°

```
1. ê³µê°œëœ ì „ìê³µì‹œ (OPENED)
   â†“
2. ìˆ˜ì • ì‹œì‘ (DRAFTë¡œ ì „ì´)
   â†“
3. ë‚´ìš© ìˆ˜ì •
   â†“
4. ê²€í†  ìš”ì²­ (UNDER_REVIEW)
   â†“
5. ìŠ¹ì¸ (APPROVED)
   â†“
6. ì¬ê³µê°œ (OPENED)
```

## ğŸ“š ì°¸ê³  ì‚¬í•­

- ìƒíƒœ ë³€ê²½ì€ **ì›ìì (Atomic)**ìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ì•¼ í•¨
- ìƒíƒœ ì „ì´ ì‹œ **ì´ë ¥ ë¡œê¹…** ê³ ë ¤ (ì„ íƒì‚¬í•­)
- **Optimistic Locking** (`version` í•„ë“œ)ì„ í™œìš©í•˜ì—¬ ë™ì‹œ ìˆ˜ì • ë°©ì§€
- ìƒíƒœë³„ **ê¶Œí•œ ì²´í¬** í•„ìš” (ì˜ˆ: ìŠ¹ì¸ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œ ìƒíƒœ ë³€ê²½ ê°€ëŠ¥)
- ì „ìê³µì‹œëŠ” ì£¼ì£¼ì´íšŒ, IR ìë£Œ ë“± ë²•ì  ìš”ê±´ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìƒíƒœ ì „ì´ ì´ë ¥ ë³´ê´€ ê¶Œì¥
